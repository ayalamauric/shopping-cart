{"version":3,"sources":["index.js","add.js"],"names":["EcomCart","console","log","cart","subtotal","items","db","window","localStorage","json","getItem","JSON","parse","err","saveCart","setItem","stringify","handleItem","item","module","exports","add","newItem","product_id","quantity","price","i","length","variation_id","error","Error"],"mappings":"AAWA,IAAAA,SAAA,IAEA,WACA,aAEAC,QAAAC,IAAA,GAOAF,SAAAG,KAAA,CACAC,SAAA,EACAC,MAAA,IAOAL,SAAAK,MAAAL,SAAAG,KAAAE,MAGA,IAAAC,EAAAC,QAAAA,OAAAC,aAEA,GAAAF,EAAA,CACA,IAAAG,EAAAH,EAAAI,QAAA,QACA,IACA,IAAAP,EAAAQ,KAAAC,MAAAH,GACAT,SAAAG,KAAAA,EACA,MAAAU,KAQAb,SAAAc,SAAA,WACAR,GACAA,EAAAS,QAAA,OAAAJ,KAAAK,UAAAhB,SAAAG,QAQAH,SAAAiB,WAAA,SAAAC,GACAlB,SAAAc,YAGA,iBAAAP,OAGAA,OAAAP,SAAAA,SACAmB,QAAAA,OAAAC,UAMAD,OAAAC,QAAApB,UA7DA,GCXA,WACA,aAOAA,SAAAqB,IAAA,SAAAC,GAEA,GAAA,iBAAAA,EAAAC,YACA,iBAAAD,EAAAE,UAAA,GAAAF,EAAAE,UACA,iBAAAF,EAAAG,OAAA,GAAAH,EAAAG,MAOA,IAAA,IAAAC,EAAA,EAAAA,EAAA1B,SAAAK,MAAAsB,OAAAD,IAAA,CACA,IAAAR,EAAAlB,SAAAK,MAAAqB,GAEA,GAAAR,EAAAK,aAAAD,EAAAC,YAAAL,EAAAU,eAAAN,EAAAM,aAKA,OAFAV,EAAAM,UAAAF,EAAAE,SACAN,EAAAO,MAAAH,EAAAG,MACAzB,SAAAiB,WAAAC,QAZAjB,QAAA4B,MAAA,IAAAC,MAAA,uCAfA","file":"shopping-cart.min.js","sourcesContent":["/**\n * https://github.com/ecomclub/shopping-cart\n * @author E-Com Club <ti@e-com.club>\n * @license MIT\n */\n\n/**\n * EcomCart object with shopping cart methods.\n * @namespace\n */\n\nvar EcomCart = {}\n\n;(function () {\n  'use strict'\n\n  console.log(5)\n\n  /**\n   * Current cart object.\n   * @type {object}\n   * @see {@link https://developers.e-com.plus/docs/api/#/store/carts/carts|Object model}\n   */\n  EcomCart.cart = {\n    subtotal: 0,\n    items: []\n  }\n\n  /**\n   * List of cart items.\n   * @type {array.<object>}\n   */\n  EcomCart.items = EcomCart.cart.items\n\n  // use browser local storage if available\n  var db = window && window.localStorage\n  // try to load stored cart object\n  if (db) {\n    var json = db.getItem('cart')\n    try {\n      var cart = JSON.parse(json)\n      EcomCart.cart = cart\n    } catch (err) {\n      // ignore invalid cart JSON\n    }\n  }\n\n  /**\n   * Save cart object to browser localStorage.\n   */\n  EcomCart.saveCart = function () {\n    if (db) {\n      db.setItem('cart', JSON.stringify(EcomCart.cart))\n    }\n  }\n\n  /**\n   * Check item quantity, update subtotal and save new cart object.\n   * @param {object} item - Cart item object\n   */\n  EcomCart.handleItem = function (item) {\n    EcomCart.saveCart()\n  }\n\n  if (typeof window === 'object') {\n    // on browser\n    // set EcomCart object globally\n    window.EcomCart = EcomCart\n  } else if (module && module.exports) {\n    /**\n     * Exports EcomCart object.\n     * @module @ecomplus/shopping-cart\n     * @returns {object} {@link EcomCart}\n     */\n    module.exports = EcomCart\n  }\n}())\n","/* global EcomCart */\n\n;(function () {\n  'use strict'\n\n  /**\n   * Add item to cart.\n   * @param {object} item - Cart item object\n   */\n\n  EcomCart.add = function (newItem) {\n    // check required fields\n    if (typeof newItem.product_id === 'string' &&\n      typeof newItem.quantity === 'number' && newItem.quantity >= 0 &&\n      typeof newItem.price === 'number' && newItem.price >= 0) {\n      // do the stuf\n    } else {\n      console.error(new Error('Trying to add invalid item object'))\n      return\n    }\n\n    for (var i = 0; i < EcomCart.items.length; i++) {\n      var item = EcomCart.items[i]\n      // check IDs\n      if (item.product_id === newItem.product_id && item.variation_id === newItem.variation_id) {\n        // same product and variation\n        // update quantity and price\n        item.quantity += newItem.quantity\n        item.price = newItem.price\n        return EcomCart.handleItem(item)\n      }\n    }\n  }\n}())\n"]}