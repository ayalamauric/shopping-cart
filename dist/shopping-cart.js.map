{"version":3,"sources":["index.js","add.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shopping-cart.js","sourcesContent":["/**\n * https://github.com/ecomclub/shopping-cart\n * @author E-Com Club <ti@e-com.club>\n * @license MIT\n */\n\n/**\n * EcomCart object with shopping cart methods.\n * @namespace\n */\n\nvar EcomCart = {}\n\n;(function () {\n  'use strict'\n\n  /**\n   * Current cart object.\n   * @type {object}\n   * @see {@link https://developers.e-com.plus/docs/api/#/store/carts/carts|Object model}\n   */\n  EcomCart.cart = {\n    subtotal: 0,\n    items: []\n  }\n\n  /**\n   * List of cart items.\n   * @type {array.<object>}\n   */\n  EcomCart.items = EcomCart.cart.items\n\n  // use browser local storage if available\n  var db = window && window.localStorage\n  // try to load stored cart object\n  if (db) {\n    var json = db.getItem('cart')\n    try {\n      var cart = JSON.parse(json)\n      EcomCart.cart = cart\n    } catch (err) {\n      // ignore invalid cart JSON\n    }\n  }\n\n  /**\n   * Save cart object to browser localStorage.\n   */\n  EcomCart.saveCart = function () {\n    if (db) {\n      db.setItem('cart', JSON.stringify(EcomCart.cart))\n    }\n  }\n\n  /**\n   * Check item quantity, update subtotal and save new cart object.\n   * @param {object} item - Cart item object\n   */\n  EcomCart.handleItem = function (item) {\n    EcomCart.saveCart()\n  }\n\n  if (typeof window === 'object') {\n    // on browser\n    // set EcomCart object globally\n    window.EcomCart = EcomCart\n  } else if (module && module.exports) {\n    /**\n     * Exports EcomCart object.\n     * @module @ecomplus/shopping-cart\n     * @returns {object} {@link EcomCart}\n     */\n    module.exports = EcomCart\n  }\n}())\n","/* global EcomCart */\n\n(function () {\n  'use strict'\n\n  /**\n   * Add item to cart.\n   * @param {object} item - Cart item object\n   */\n\n  EcomCart.add = function (newItem) {\n    // check required fields\n    if (typeof newItem.product_id === 'string' &&\n      typeof newItem.quantity === 'number' && newItem.quantity >= 0 &&\n      typeof newItem.price === 'number' && newItem.price >= 0) {\n      // do the stuf\n    } else {\n      console.error(new Error('Trying to add invalid item object'))\n      return\n    }\n\n    for (var i = 0; i < EcomCart.items.length; i++) {\n      var item = EcomCart.items[i]\n      // check IDs\n      if (item.product_id === newItem.product_id && item.variation_id === newItem.variation_id) {\n        // same product and variation\n        // update quantity\n        item.quantity += newItem.quantity\n        return EcomCart.handleItem(item)\n      }\n    }\n  }\n}())\n"]}